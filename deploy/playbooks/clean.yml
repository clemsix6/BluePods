---
# Stop all nodes and clean data

- name: Stop all nodes first
  import_playbook: stop.yml

- name: Clean data and logs
  hosts: all
  gather_facts: false
  tasks:
    - name: Remove data directory
      file:
        path: "{{ bluepods_dir }}/data"
        state: absent

    - name: Remove logs directory
      file:
        path: "{{ bluepods_dir }}/logs"
        state: absent

    - name: Recreate directories
      file:
        path: "{{ bluepods_dir }}/{{ item }}"
        state: directory
      loop:
        - data
        - logs
